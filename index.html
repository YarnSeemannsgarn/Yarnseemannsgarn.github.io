<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Pedal for Ukraine</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="container">
      <h1>Pedal for Ukraine</h1>
      <table class="table table-striped">
        <tbody>
          <tr scope="row">
            <td class="col-2"><strong>Gefahrene Strecke</strong></td>
            <td class="col"><span id="value1">0</span>km <span style="font-size: smaller">(letzte Aktualisierung: 13.04.2022)</span></td>
          </tr>
          <tr scope="row">
            <td class="col-2"><strong>Spender*innen</strong></td>
            <td class="col"><span id="value2">0</span></td>
          </tr>
          <tr scope="row">
            <td class="col-2"><strong>Gesammelte Spenden</strong></td>
            <td class="col"><span id="value3">0</span>€</td>
          </tr>
        </tbody>
      </table>
      <div class="gpxview:GPX/1.gpx,GPX/2.gpx,GPX/4.gpx,GPX/5.gpx,GPX/6.gpx,GPX/7.gpx,GPX/8.gpx,GPX/9.gpx,GPX/10.gpx,GPX/11.gpx,GPX/12.gpx,GPX/13.gpx,GPX/14.gpx,GPX/15.gpx,GPX/16.gpx,GPX/17.gpx,GPX/18.gpx,GPX/19.gpx,GPX/20.gpx,GPX/21.gpx,GPX/22.gpx,GPX/23.gpx,GPX/24.gpx,GPX/25.gpx,GPX/26.gpx,GPX/27.gpx,GPX/28.gpx,GPX/29.gpx,GPX/30.gpx,GPX/31.gpx,GPX/32.gpx,GPX/33.gpx,GPX/34.gpx,GPX/35.gpx:OSM" style="width: 100%; height: 70vh">
        <noscript><p>Zum Anzeigen der Karte wird Javascript benötigt.</p></noscript>
      </div>
    </div>
    <script>
      var Bestaetigung = false;
      var Legende_fnm = false;
	  var Fullscreenbutton = true;
      var Tcols = "#ff0000,#00ff00"
    </script>
    <script>
      function animateValue(id, start, end, duration) {
          // assumes integer values for start and end

          var obj = document.getElementById(id);
          var range = end - start;
          // no timer shorter than 50ms (not really visible any way)
          var minTimer = 50;
          // calc step time to show all interediate values
          var stepTime = Math.abs(Math.floor(duration / range));

          // never go below minTimer
          stepTime = Math.max(stepTime, minTimer);

          // get current time and calculate desired end time
          var startTime = new Date().getTime();
          var endTime = startTime + duration;
          var timer;

          function run() {
              var now = new Date().getTime();
              var remaining = Math.max((endTime - now) / duration, 0);
              var value = Math.round(end - (remaining * range));
              obj.innerHTML = value;
              if (value == end) {
                  clearInterval(timer);
              }
          }

          timer = setInterval(run, stepTime);
          run();
      }

      animateValue("value1", 0, 4023, 7000);
      animateValue("value2", 0, 5, 7000);
      animateValue("value3", 0, 130, 7000);
    </script>
    <script src="GM_Utils/GPX2GM.js"></script>
  </body>
</html>
